---
layout: post
title:  "Android ç»„ä»¶åŒ–"
date:   2018-08-09
categories: [android]
---


## æ¨¡å—åŒ–å’Œç»„ä»¶åŒ–æœ‰å•¥åŒºåˆ«å‘¢ï¼Ÿ
- æ¨¡å—åŒ–çš„ç›®çš„æ˜¯ä¸ºäº†é‡ç”¨ï¼Œæ¨¡å—åŒ–åå¯ä»¥æ–¹ä¾¿é‡å¤ä½¿ç”¨å’Œæ’æ‹¨åˆ°ä¸åŒçš„å¹³å°ï¼Œä¸åŒçš„ä¸šåŠ¡é€»è¾‘è¿‡ç¨‹ä¸­ã€‚
- ç»„ä»¶åŒ–çš„ç›®çš„æ˜¯ä¸ºäº†è§£è€¦ï¼ŒæŠŠç³»ç»Ÿæ‹†åˆ†æˆå¤šä¸ªç»„ä»¶ï¼Œåˆ†ç¦»ç»„ä»¶è¾¹ç•Œå’Œè´£ä»»ï¼Œä¾¿äºç‹¬ç«‹å‡çº§å’Œç»´æŠ¤ã€‚

## å•ä¸€å·¥ç¨‹æ¨¡å¼

![](/static/img/posts/WX20180807-112040@2x.png)

ä¼ ç»Ÿå•ä¸€å·¥ç¨‹ç»“æ„å¦‚ä¸Šå›¾æ‰€ä»¥ï¼Œå…¶è°ƒç”¨å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

![](/static/img/posts/20170522210912111.png)

æ­£å¦‚ä¸Šå›¾æˆ‘ä»¬çœ‹åˆ°çš„é‚£æ ·ï¼Œå„ä¸ªæ¨¡å—ä¹‹é—´è°ƒç”¨ç›¸äº’äº¤é”™å½¼æ­¤å½±å“ï¼Œéšç€é¡¹ç›®è¶Šæ¥è¶Šå¤§å¯èƒ½ä¼šé€ æˆå¦‚ä¸‹æƒ…å†µï¼š

- å¢å‡éœ€æ±‚å¦‚è¦å‘½
- ä¸€ä¸ªå°éœ€æ±‚è¦ç¼–è¯‘è¿è¡Œæ•´ä¸ªé¡¹ç›®
- åŠŸèƒ½æµ‹è¯•å’Œéœ€æ±‚æµ‹è¯•æ¯æ¬¡éƒ½è¦è¿›è¡Œ
- çµæ´»æ€§å·®ï¼Œä¸šåŠ¡è€¦åˆ
- äººåŠ›æˆæœ¬å·¨å¤§

ä¸ºäº†é˜²æ­¢åœ¨é¡¹ç›®è¿­ä»£çš„è¿‡ç¨‹ä¸­å‡ºç°å¦‚ä¸Šé—®é¢˜ï¼Œæˆ‘ä»¬å¼€å§‹ç€æ‰‹ç ”ç©¶ç»„ä»¶åŒ–æ–¹æ¡ˆï¼Œå…³äºç»„ä»¶åŒ–çš„å¥½å¤„æˆ‘è¿™é‡Œä¸å†ç»†æ•°äº†ï¼Œæƒ³è¦äº†è§£çš„å¯ä»¥è‡ªè¡Œæœç´¢ã€‚

## è·¯ç”±

![](/static/img/posts/20170522212705133.png)

è·¯ç”±æ˜¯å®Œæˆç»„ä»¶åŒ–çš„å…³é”®ï¼Œæ˜¯å„ä¸ªä¸šåŠ¡çš„è¡”æ¥çš„æ¡¥æ¢[è·¯ç”±ä¸ä¸šåŠ¡å…³ç³»å¦‚ä¸Šå›¾æ‰€ç¤º]ï¼Œæ‰€ä»¥æˆ‘ä»¬é¦–è¦è§£å†³çš„å°±æ˜¯è¿™é—®é¢˜ï¼Œç”±äºandroidç³»ç»Ÿå…¶å¼€æ”¾æ€§çš„ç‰¹ç‚¹[å¦‚æœå…è®¸çš„è¯å¯ä»¥åœ¨æ‰“å¼€ä»»ä½•appçš„ä»»æ„ç•Œé¢]ã€‚androidä¸­ä¸€ä¸ªActivityå°±ä»£è¡¨ä¸€ä¸ªå¯è§†ç•Œé¢ï¼Œå…¶æ‰“å¼€æ–¹å¼åŒ…å«æ˜¾å¼å¯åŠ¨å’Œéšå¼å¯åŠ¨è¿™ä¸¤ç§ï¼Œæ˜¾ç¤ºå¯åŠ¨æ²¡æœ‰ä»€ä¹ˆå¥½è¯´çš„ï¼Œä¸€èˆ¬ç”¨åœ¨Appå†…éƒ¨ï¼Œè€Œå¦ä¸€ç§éšå¼å¸¸è¢«ç”¨æ¥appä¹‹é—´çš„è°ƒç”¨ã€‚æ‰€ä»¥è·¯ç”±å®ç°åŸç†ä¹Ÿå°±è¿™ä¸¤ç§äº†ï¼Œç›®å‰å¼€æºç¤¾åŒºçš„ä¸»æµæ¡†æ¶ä¹ŸåŸºæœ¬ä¸ŠåŸºäºè¿™ä¸¤ç§äº†ï¼Œä½†æ˜¯ä¸€ä¸ªæ¡†æ¶åœ¨ä¿è¯å…¶å®ç°èƒ½åŠ›çš„åŒæ—¶ï¼Œå¤§ç‰›æ”¯æŒã€ç»´æŠ¤ã€å¤§å‚åç›¾ç­‰è¿™äº›å› ç´ ä¹Ÿæ˜¯æˆ‘ä»¬åœ¨é€‰å‹çš„æ—¶å€™å¿…é¡»è¦è€ƒè™‘çš„ã€‚ç»¼ä¸Šå› ç´ æˆ‘ä»¬æ‰¾åˆ°äº†ARouteræ¡†æ¶ï¼Œå®Œå…¨è¦†ç›–äº†æˆ‘ä»¬å¯¹ç»„ä»¶åŒ–çš„éœ€æ±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ä½¿ç”¨å®ƒä½œä¸ºæˆ‘ä»¬è·¯ç”±æ¡†æ¶äº†ï¼ˆå…¶å®æœ€ä¸»è¦çš„è¿˜æ˜¯å¥½ç”¨ã€è§£è€¦ğŸ»ï¼‰ã€‚

## å·¥ç¨‹ç»“æ„

![](/static/img/posts/2018-08-02-17-04-37.png)

å‰é¢æˆ‘ä»¬å·²ç»äº†è§£åˆ°äº†ï¼Œä¼ ç»Ÿçš„appæ¶æ„æ‰€æ‹¥æœ‰çš„ç—›ç‚¹ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªç—›ç‚¹æˆ‘ä»¬å¼•å…¥äº†ç»„ä»¶åŒ–æ¶æ„è®¾è®¡ï¼Œå¦‚ä½•æ¥è®¾è®¡ç»„ä»¶åŒ–ç»“æ„å‘¢ï¼Ÿå…¶å®å…³äºè¿™ä¸€ç‚¹Androidå·²ç»ä¸ºæˆ‘ä»¬åšå¥½äº†é“ºè®¾ï¼Œé‚£å°±æ˜¯åˆ©ç”¨Android libraryå’Œgradleï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åˆ›å»ºçš„Androidå·¥ç¨‹ä¸‹å†åˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ªlibraryï¼Œè¿™æ˜¯ä¼—æ‰€å‘¨çŸ¥çš„äº‹äº†ï¼Œæ‰€ä»¥å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬éœ€è¦è®¾è®¡å¥½appçš„ä¸šåŠ¡æ¨¡å—ï¼Œä¸ºæ¯ä¸€ä¸ªä¸šåŠ¡æ¨¡å—åˆ›å»ºä¸€ä¸ªlibraryå·¥ç¨‹ï¼Œå½¢æˆå¦‚ä¸Šå›¾æ‰€ç¤ºçš„ç»“æ„ï¼Œå½“ç„¶ä¸€ä¸ªappä¸€èˆ¬ä¼šä¾èµ–ä¸€äº›ç¬¬ä¸‰æ–¹åº“ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨gradleæ¥ç®¡ç†è¿™äº›ä¾èµ–ã€‚å‘ä¸Šé¢æˆ‘ä»¬ä»‹ç»çš„ARouterä¹Ÿæ˜¯å±äºç¬¬ä¸‰æ–¹åº“ï¼Œåƒè¿™æ ·ä¸€ç±»åº“æ˜¯å„ä¸ªæ¨¡å—éƒ½å¯èƒ½éœ€è¦çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æŠŠè¿™äº›åº“ç»„æˆä¸€ä¸ªå…¬å…±ç»„ä»¶åº“æ¥ä½¿ç”¨ï¼Œä»¥æ–¹ä¾¿ç»Ÿä¸€ç®¡ç†ï¼Œè¿™æ ·æˆ‘ä»¬å°±å°†ä¸šåŠ¡å’Œå…¬å…±ç»„ä»¶åˆ†å¼€äº†ï¼Œæœ‰äº†è¿™æ ·çš„ç»“æ„åæˆ‘ä»¬å°±å¯ä»¥åˆ†æ¨¡å—å¼€å‘äº†ï¼Œä½†æ˜¯è¿™é‡Œè¿˜æœ‰å¦‚ä¸‹é—®é¢˜éœ€è¦è§£å†³ã€‚

### å¦‚ä½•è§£å†³å¼•ç”¨åº“å†²çªé—®é¢˜ï¼Ÿ

ä¸€ä¸ªå·¥ç¨‹ä¸­ç®¡ç†å¤šä¸ªæ¨¡å—å¿…ç„¶ä¼šæœ‰ä¸€äº›åº“é‡å¤å¼•ç”¨æˆ–è€…ç‰ˆæœ¬å†²çªç­‰é—®é¢˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è§£å†³å‘¢ï¼Ÿå…¶è§£å†³æ–¹æ¡ˆä¸»è¦åˆ†ä¸¤æ­¥ã€‚
ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬å¯ä»¥å°†å„ä¸ªæ¨¡å—å¼•ç”¨çš„ä¸€äº›ç¬¬ä¸‰æ–¹åº“çš„ç‰ˆæœ¬å·ï¼Œåœ¨å·¥ç¨‹ç›®å½•ä¸‹çš„build.gradleæ–‡ä»¶ä¸­ä»¥å¸¸é‡çš„æ–¹å¼å®šä¹‰ï¼Œç„¶ååœ¨å„ä¸ªæ¨¡å—ä¸­å¼•ç”¨è¿™äº›å¸¸é‡ã€‚

```Groovy
ext {
    compileSdkVersion = 25
    buildToolsVersion = "25.0.2"
    minSdkVersion = 21
    targetSdkVersion = 25
}
```

ç¬¬äºŒæ­¥ï¼Œæˆ‘ä»¬å°†å„ä¸ªæ¨¡å—éƒ½ä¼šä½¿ç”¨çš„ä¸€äº›ç¬¬ä¸‰æ–¹åº“æå–å‡ºæ¥ï¼ŒæŠŠä»–ä»¬æ”¾åˆ°å•ç‹¬çš„ä¸€ä¸ªgradleæ–‡ä»¶ä¸­ï¼Œä¸€èˆ¬æˆ‘ä»¬å°†è¯¥æ–‡ä»¶æ”¾åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹[ä¸setting.gradleåŒçº§]ï¼Œç„¶ååœ¨å„ä¸ªæ¨¡å—ä¸­å¼•ç”¨å®ƒã€‚
æ¯”å¦‚æˆ‘ä»¬æ”¾ç½®ç¬¬ä¸‰æ–¹åº“çš„æ–‡ä»¶å«third.gradle

```Groovy
dependencies {
    testCompile 'junit:junit:4.12'
    implementation 'com.squareup.okhttp3:okhttp:3.5.0'
    implementation 'com.google.code.gson:gson:2.6.1'
    implementation 'cn.isif.alibs:alibs:2.0.0'
}
```

åœ¨å„ä¸ªç»„ä»¶ä¸­å¼•ç”¨

```groovy
apply from: "../third.gradle"
```

## å¦‚ä½•ç‹¬ç«‹å¼€å‘è°ƒè¯•ä¸€ä¸ªæ¨¡å—å‘¢ï¼Ÿ

æˆ‘ä»¬çŸ¥é“ç‹¬ç«‹çš„libraryè¦è°ƒè¯•çš„è¯ï¼Œå¿…é¡»å°†libraryä½œä¸ºä¸€ä¸ªåº”ç”¨æ‰è¡Œï¼Œåœ¨gradleä¸­å°†ä¸€ä¸ªæ¨¡å—ç¬¬ä¸€ä½åº“ä½¿ç”¨`apply plugin: 'com.android.library'`ï¼Œä¸€ä¸ªåº”ç”¨åˆ™ä½¿ç”¨`apply plugin: 'com.android.application'`ï¼Œæ‰€ä»¥æˆ‘ä»¬è§£å†³æ–¹æ³•å°±æœ‰äº†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æœ€å¤–å±‚çš„build.gradleæ–‡ä»¶ä¸­å®šä¹‰ä¸ªä¸€ä¸ªisDebugå¸¸é‡ï¼Œåœ¨æ¯ä¸ªæ¨¡å—ä¸­åšä¸€ä¸‹åˆ¤æ–­ï¼š
```groovy
if (isDebug.toBoolean()) {
    apply plugin: 'com.android.application'
} else {
    apply plugin: 'com.android.library'
}
```

åªæ˜¯å°†æ¨¡å—å®šä¹‰ä¸ºapplicationè¿˜æ˜¯ä¸èƒ½è¿è¡Œï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨mainfestæ–‡ä»¶å®šä¹‰å¯åŠ¨é¡µé¢ï¼Œè¿™é‡Œå°±æœ‰ä¸€ä¸ªé—®é¢˜äº†ï¼Œå¦‚æœæˆ‘ä»¬ä¸åšä»»ä½•é…ç½®çš„è¯æˆ‘ä»¬éœ€è¦åœ¨åˆ‡æ¢ç»„ä»¶çš„æ—¶å€™æ¥å›æ”¹è¿™ä¸ªæ–‡ä»¶ï¼Œè¿™æ˜¾ç„¶ä¸æ˜¯ä¸€ç§å¥½çš„æ–¹å¼ï¼Œè¿™é‡Œæˆ‘ä»¬å°±éœ€è¦åˆ°æˆ‘ä»¬çš„gradleæ–‡ä»¶ä¸­å»æŒ‡å®šé¡¹ç›®çš„mainfestæ–‡ä»¶äº†ã€‚å¦‚ï¼šæˆ‘ä»¬åœ¨mainç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªdebugæ–‡ä»¶ï¼Œé‡Œé¢copyä¸€ä»½mainfestæ–‡ä»¶ç”¨äºé…ç½®è°ƒè¯•é˜¶æ®µã€‚
åœ¨build.gradleæ–‡ä»¶ä¸­

```groovy
sourceSets {
        main {
            if (isDebug.toBoolean()) {
                manifest.srcFile 'src/main/debug/AndroidManifest.xml'
            } else {
                manifest.srcFile 'src/main/AndroidManifest.xml'
            }
        }
    }
```

è¿™æ ·æˆ‘ä»¬å°±è§£å†³æ¨¡å—çš„ç‹¬ç«‹è°ƒè¯•ä¸å¼€å‘çš„é—®é¢˜äº†ã€‚

## å¦‚ä½•è§£å†³èµ„æºå†²çªé—®é¢˜ï¼Ÿ

æˆ‘ä»¬çŸ¥é“ï¼Œä¸€æ—¦æˆ‘ä»¬å¼€å§‹ç»„ä»¶åŒ–åï¼Œæ¯ä¸ªç»„ä»¶éƒ½ä¼šå¼•ç”¨ä¸€äº›èµ„æºæ–‡ä»¶ï¼Œä¸å¯é¿å…çš„ä¼šå‡ºç°åŒåç§°çš„èµ„æºï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæ¯”è¾ƒç®€å•çš„åšæ³•æ˜¯æŒ‡å®šå‘½åè§„èŒƒï¼Œä¸åŒæ¨¡å—ä¸‹çš„èµ„æºååŠ ä¸Šå‰ç¼€ï¼Œè¿™æ ·å°±èƒ½åŒºåˆ†äº†ã€‚

## å¦‚ä½•ç®¡ç†å¤šä¸ªç»„ä»¶ä¹‹é—´ç›¸åŒçš„èµ„æºï¼Ÿ

ä¸€æ—¦æˆ‘ä»¬å°†é¡¹ç›®æ‹†åˆ†æˆä¸ºå¤šä¸ªå·¥ç¨‹ï¼Œå„ä¸ªå·¥ç¨‹ä¸­å¿…ç„¶æ¶‰åŠåˆ°å¼•ç”¨ç›¸åŒçš„èµ„æºï¼Œå½“ç„¶æˆ‘ä»¬å¯ä»¥æŠŠè¿™äº›å…¬å…±çš„èµ„æºåœ¨æ¯ä¸€ä¸ªå·¥ç¨‹é‡Œéƒ½æ”¾ç½®ä¸€ä»½ï¼Œä½†è¿™ä¼šå¼•èµ·å®‰è£…åŒ…å¢å¤§åŒæ—¶ä¹Ÿä¼šå¯¼è‡´æˆ‘ä»¬æ•´ä¸ªå·¥ç¨‹å­˜åœ¨å†—ä½™æ–‡ä»¶çš„é—®é¢˜ï¼Œä¸ºäº†é¿å…è¿™æ ·çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªç”¨æ¥ç®¡ç†å…¬å…±èµ„æºæ–‡ä»¶çš„libraryåº“ï¼Œå°†æ‰€æœ‰çš„èµ„æºéƒ½æ”¾åœ¨è¿™ä¸ªåº“ä¸­ï¼Œè¿™æ ·å¯ä»¥è§£å†³å…¬å…±èµ„æºç®¡ç†çš„é—®é¢˜ã€‚


æ›´å¤šå…³äºç»„ä»¶åŒ–å®ç°çš„ç»†èŠ‚å¯ä»¥å‚è€ƒæˆ‘ä»¬çš„[ARouterDemo](https://github.com/uncle404/ArouterDemo)ã€‚


## å‚è€ƒ

- [å½“MVVMé‡åˆ°Databindingï¼Œäº¬ä¸œå·¥ç¨‹å¸ˆå®ç°1+1>2](https://mp.weixin.qq.com/s/ceHY88Itew8w5wYiNOYwtg)
- [GitHub - alibaba/ARouter: ğŸ’ª A framework for assisting in the renovation of Android componentization](https://github.com/alibaba/ARouter)
- [é˜¿é‡Œè·¯ç”±æ¡†æ¶â€”ARouter æºç è§£æä¹‹Compiler - CSDNåšå®¢](https://blog.csdn.net/crazy1235/article/details/77126904)
- [Androidç»„ä»¶åŒ–å¼€å‘å®è·µ - ç®€ä¹¦](https://www.jianshu.com/p/186fa07fc48a)
- [Androidç»„ä»¶åŒ–æ–¹æ¡ˆ - CSDNåšå®¢](https://blog.csdn.net/guiying712/article/details/55213884)
- [ç»„ä»¶åŒ–ã€æ¨¡å—åŒ–ã€é›†ä¸­å¼ã€åˆ†å¸ƒå¼ã€æœåŠ¡åŒ–ã€é¢å‘æœåŠ¡çš„æ¶æ„ã€å¾®æœåŠ¡æ¶æ„-HollisChuangâ€™s Blog](http://www.hollischuang.com/archives/1628)
- [ä½¿ç”¨Gradleå’ŒSonatype Nexus æ­å»ºç§æœ‰mavenä»“åº“ - CSDNåšå®¢](https://blog.csdn.net/u011974987/article/details/52372185)
- [æ­å»º Maven ç§æœ‰ä»“åº“ - Android - æ˜é‡‘](https://juejin.im/entry/58eb3e3da22b9d0058aafc28)





